{% extends "base.html" %}

{% block content %}
<h1>Welcome:)</h1>

<!-- Display search results if there is a query -->
{% if query %}
    <h2>Search Results for "{{ query }}"</h2>
    {% if posts %}
        {% for post in posts %}
        <div class="post">
            <h2>{{ post.title }}</h2>
            {% if post.image %}
                <img src="{{ url_for('static', filename=post.image) }}">
            {% endif %}
            <p>{{ post.content[:200] }}...</p>
            <a class="btn" href="{{ url_for('view_post', post_id=post.id) }}">Click here to view full post</a>
        </div>
        {% endfor %}
    {% else %}
        <p>No results found for "{{ query }}"</p>
    {% endif %}
{% else %}
    <!-- Display all posts when there's no search query -->
    {% for post in posts %}
    <div class="post">
        <h2>{{ post.title }}</h2>
        {% if post.image %}
            <img src="{{ url_for('static', filename=post.image) }}">
        {% endif %}
        <p>{{ post.content[:200] }}...</p>
        <a class="btn" href="{{ url_for('view_post', post_id=post.id) }}">Click here to view full post</a>
    </div>
    {% endfor %}
{% endif %}

{% endblock %}